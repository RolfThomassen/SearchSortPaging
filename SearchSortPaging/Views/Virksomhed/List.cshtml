@using PagedList;
@using PagedList.Mvc;
@using GridMvc;
@model IEnumerable<SearchSortPaging.Models.vw_Co2Db_Virksomheder>

@{
  ViewBag.Title = "List";
}

<h2>List</h2>

<p>
  @Html.ActionLink("Create New", "Create")
</p>

@Html.Grid(Model).Columns(columns =>
{
    /* Adding not mapped column, that renders body, using inline Razor html helper */
    columns.Add()
            .Encoded(false)
            .Sanitized(false)
            .SetWidth(30)
            .RenderValueAs(d => @<b> @Html.ActionLink("Edit", "Index") </b>);

      columns.Add(o => o.item.Firmanavn).Titled("Firma").ThenSortByDescending(o => o.OrderID).SetFilterWidgetType("CustomCompanyNameFilterWidget");
      columns.Add(o => o.item.AdminNavn).Titled("Ansvarlig Name").ThenSortByDescending(o => o.OrderID).SetFilterWidgetType("CustomCompanyNameFilterWidget");
      columns.Add(o => o.item.Adresse1).Titled("Adr").ThenSortByDescending(o => o.OrderID).SetFilterWidgetType("CustomCompanyNameFilterWidget");
      columns.Add(o => o.item.Postnr).Titled("Postnr").ThenSortByDescending(o => o.OrderID).SetFilterWidgetType("CustomCompanyNameFilterWidget").SetWidth(60);
      columns.Add(o => o.item.Bynavn).Titled("By").ThenSortByDescending(o => o.OrderID).SetFilterWidgetType("CustomCompanyNameFilterWidget");
      columns.Add(o => o.item.Land).Titled("Land").ThenSortByDescending(o => o.OrderID).SetFilterWidgetType("CustomCompanyNameFilterWidget");
      columns.Add(o => o.item.Telefon).Titled("Tlf").ThenSortByDescending(o => o.OrderID).SetFilterWidgetType("CustomCompanyNameFilterWidget").SetWidth(130);
      columns.Add(o => o.item.KundeStatusText).Titled("Status").ThenSortByDescending(o => o.OrderID).SetFilterWidgetType("CustomCompanyNameFilterWidget").SetWidth(100);


/* Adding "OrderID" column: */
      columns.Add(o => o.OrderID).Titled("Number").SetWidth(100);

/* Adding "OrderDate" column: */
      columns.Add(o => o.OrderDate, "OrderCustomDate").Titled("Date").SortInitialDirection(GridSortDirection.Descending).Format("{0:dd/MM/yyyy}").SetWidth(110);

/* Adding "CompanyName" column: */
      columns.Add(o => o.Customer.CompanyName).Titled("Company Name").ThenSortByDescending(o => o.OrderID).SetFilterWidgetType("CustomCompanyNameFilterWidget");

/* Adding "Vip customer" column: */
      columns.Add(o => o.Customer.IsVip).Titled("Vip customer").SetWidth(150).RenderValueAs(o => CustomRenderingOfColumn(o));

}
)
.SetRowCssClasses(item => item.Customer.IsVip ? "warning" : string.Empty).WithPaging(15).Sortable().Filterable().WithMultipleFilters()
